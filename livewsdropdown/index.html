<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Drop Down</title>
<style>
body {
 background-image: url("expla.png");
 background-repeat: no-repeat;
 }
</style>

<script>
    function getCount() {

        // GET ALL THE INPUT ELEMENTS. onclick="getCount()"
        var ele = document.getElementsByTagName('input');

        // LOOP THROUGH EACH ELEMENT.
        for (i = 0; i < ele.length; i++) {

            // CHECK THE ELEMENT TYPE.
            if (ele[i].type == 'text') {
                console.log('Value: ' + ele[i].value);

                for (j = 0; j < ele[i].attributes.length; j++) {
                    console.log(ele[i].attributes[j]);
  alert("waiting");
                }
            }
        }
    }    
</script>


</head>
<body id="container" style=" height: 1800px;width: 1250 px;">



<input type="file" id="filetag">
<!--<button id="toggle" onclick="toggleBox(this)"> Toggle Input</button>-->
<form onsubmit="mySubmit(event)" action="output.html" method="post" id="myform">
<input type="hidden" id="hidurl" name="hidurl" value="" />
<input type="checkbox" id="vehicle111" name="vehicle111" value="f111" checked>
<label for="vehicle111"> Allow Buttons and Page Refresh</label><br>
<input type="text" id="frmname" name="frmname" value="" placeholder="Enter Sheet Name" required/>
<input type="text" id="usremail" name="usremail" value="" placeholder="Enter Teacher Email" required/>

<button type="submit"  id="btn"> Submit</button>
</form>


<script>
function mySubmit(e){
var grab = document.getElementById("usremail");
if (grab.value == ""){
e.preventDefault();alert("Enter your email!"); return false;}
}</script>

<script>

var bg = null;
var toggleswitch = false;
var ctr=3;

//var tgl = document.getElementById("toggle");
//tgl.addEventListener("click", toggleBox);

function toggleBox(btelem){

if (  toggleswitch == false ){ toggleswitch = true; btelem.style.background = "gold";btelem.innerHTML = "Draw Boxes";} 
else{toggleswitch = false; btelem.style.background = "lightgreen";ctr=0;btelem.innerHTML = "Enter Answers";}

}


//https://stackoverflow.com/questions/31710127/javascript-image-upload-and-display
var fileTag = document.getElementById("filetag");
   // preview = document.getElementById("preview");
    
fileTag.addEventListener("change", function() {
 // changeImage(this);

   const dataUrl = encodeImageFileAsURL(this);
  // console.log(dataUrl);

});





function changeImage(input) {
  var reader;

  if (input.files && input.files[0]) {
    reader = new FileReader();

    reader.onload = function(e) {
      preview.setAttribute('src', e.target.result);
    }

    reader.readAsDataURL(input.files[0]);
       //console.log('RESULT', reader.result)

  }
}




function encodeImageFileAsURL(element) {
  var file = element.files[0];
  var reader = new FileReader();
  reader.onloadend = function() {
    console.log('RESULT', reader.result)
         bg = document.getElementById("container");
        bg.style.backgroundImage = "url("+reader.result+")";
        bg.style.backgroundRepeat = "no-repeat";
        //bg.style.backgroundSize = "cover";
        //bg.style.backgroundPosition = "center center";
          hidden = document.getElementById("hidurl"),
             hidden.value = reader.result;
            //console.log(hidden.value);
  }
  reader.readAsDataURL(file);
}




 
//https://stackoverflow.com/questions/6150289/how-can-i-convert-an-image-into-base64-string-using-javascript
function printMousePos(event) {
///  document.getElementById("mydiv").textContent =   "windowX: " + event.clientX +    " - windowY: " + event.clientY +  "pageX: " + ///event.pageX +    " - pageY: " + event.pageY;
//console.log(bg);

//if ( toggleswitch == true ){
ctr++;
//console.log(ctr);
if (  ctr >3){
var input = document.createElement("input");
input.type = "text";
input.name = ctr;
//input.value = event.pageX+"-"+event.pageY+"-";
input.value = "";
input.className = "npt"; // set the CSS class
input.style.background = "gold";
input.style.lineHeight="20px";
input.style.fontSize="20px";
input.size = "7";
input.style.position = "absolute";
input.style.left = event.pageX+"px";
input.style.top = event.pageY+"px";

var xco = document.createElement("input");
xco.type = "hidden";
xco.name = "xco-"+ctr;
xco.value = event.pageX;
var yco = document.createElement("input");
yco.type = "hidden";
yco.name = "yco-"+ctr;
yco.value = event.pageY;

 // put it into the DOM
var parent = document.getElementById("container");
parent.appendChild(input);
parent.appendChild(xco);
parent.appendChild(yco);
var parform = document.getElementById("myform");
parform.appendChild(input);
parform.appendChild(xco);
parform.appendChild(yco);
}
//}
}
document.addEventListener("dblclick", printMousePos);

</script>
</body>
</html>

